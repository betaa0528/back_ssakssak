import{u as q,a as T,c as L,d as N,r as D,p as I,j as g,o as u,e as d,f as e,F as w,q as x,w as h,s as M,v as B,x as K,t as a,k as y,l as r,y as m,h as i,z as U,A as Y}from"./index-DvTNLHIP.js";import{b as A}from"./boardApi-BOuP6GHb.js";import{h as R}from"./moment-C5S46NFB.js";const S=e("h1",{class:"mb-3"},[e("i",{class:"fa-solid fa-paste"}),i(" 게시글 목록")],-1),E={class:"mt-4"},F=e("div",{class:"form-label"},"type",-1),P=["id","value"],j=["for"],z={class:"row mt-2"},H={class:"col-3"},W=e("label",{class:"form-label"},"검색 종류",-1),G=Y('<option value="">선택하세요.</option><option value="all">전체</option><option value="title">제목</option><option value="content">내용</option><option value="writer">글쓴이</option>',5),J=[G],O={class:"col-8"},Q=e("label",{class:"form-label"},"검색어",-1),X=e("label",{class:"form-label"},[i("   "),e("span",{class:"text-body-secondary"})],-1),Z={class:"mt-3 text-end"},$={class:"table table-striped"},ee=e("thead",null,[e("tr",null,[e("th",{style:{width:"60px"}},"No"),e("th",{style:{width:"100px"}},"Type"),e("th",null,"제목"),e("th",{style:{width:"150px"}},"작성자"),e("th",{style:{width:"120px"}},"작성일"),e("th",{style:{width:"80px"}},"조회수")])],-1),te={class:"my-5 d-flex"},se={class:"flex-grow-1 text-center"},oe=e("i",{class:"fa-solid fa-backward-fast"},null,-1),ae=e("i",{class:"fa-solid fa-caret-left"},null,-1),le=e("i",{class:"fa-solid fa-caret-right"},null,-1),ne=e("i",{class:"fa-solid fa-forward-fast"},null,-1),re=e("i",{class:"fa-solid fa-pen-to-square"},null,-1),pe={__name:"BoardListPage",setup(ce){const n=q(),_=T(),l=L({}),k=N(()=>l.value.boardList),s=D({page:parseInt(n.query.page)||1,amount:parseInt(n.query.amount)||12,searchType:"",searchValue:"",types:[]}),C=async c=>{console.log("CLICK,,,,"),_.push({query:{page:c,amount:s.amount,searchType:s.searchType,searchValue:s.searchValue,types:s.types}})},f=async()=>{console.log("CLICK,,,,"),_.push({query:{page:s.page,amount:s.amount,searchType:s.searchType,searchValue:s.searchValue,types:s.types}})};I(n,async c=>{console.log("WATCH",n.query.page),await b(n.query)});const b=async c=>{try{l.value=await A.getList(c),console.log(l.value),s.types.length==0&&l.value.boardCategory.forEach(o=>{s.types.push(o.type)})}catch{}};return b(s),(c,o)=>{const v=g("router-link"),V=g("vue-awesome-paginate");return u(),d("div",null,[S,e("div",E,[F,(u(!0),d(w,null,x(l.value.boardCategory,t=>(u(),d("div",{key:t.type,class:"form-check form-check-inline"},[h(e("input",{"onUpdate:modelValue":o[0]||(o[0]=p=>s.types=p),checked:"",class:"form-check-input",type:"checkbox",id:t.type,value:t.type},null,8,P),[[U,s.types]]),e("label",{class:"form-check-label",for:t.type},a(t.name),9,j)]))),128))]),e("div",z,[e("div",H,[W,h(e("select",{"onUpdate:modelValue":o[1]||(o[1]=t=>s.searchType=t),class:"form-select",required:""},J,512),[[M,s.searchType]])]),e("div",O,[Q,h(e("input",{"onUpdate:modelValue":o[2]||(o[2]=t=>s.searchValue=t),onKeyup:K(f,["enter"]),type:"text",class:"form-control",placeholder:"내용을 입력하세요."},null,544),[[B,s.searchValue]])]),e("div",{class:"col-1"},[X,e("button",{class:"form-control btn btn-primary",onClick:f},"검색")])]),e("div",Z,"(총 "+a(l.value.totalCount)+"건)",1),e("table",$,[ee,e("tbody",null,[(u(!0),d(w,null,x(k.value,t=>(u(),d("tr",{key:t.bno},[e("td",null,a(t.bno),1),e("td",null,a(l.value.boardCategory.filter(p=>{if(p.type==t.type)return t.type})[0].name),1),e("td",null,[y(v,{to:{name:"board/detail",params:{no:t.bno},query:m(n).query}},{default:r(()=>[i(a(t.title),1)]),_:2},1032,["to"])]),e("td",null,a(t.memberName)+"("+a(t.memberId)+")",1),e("td",null,a(m(R)(t.regDate).format("YYYY-MM-DD")),1),e("td",null,a(t.readCount),1)]))),128))])]),e("div",te,[e("div",se,[y(V,{"total-items":l.value.totalCount,"items-per-page":s.amount,"max-pages-shown":5,"show-ending-buttons":!0,modelValue:s.page,"onUpdate:modelValue":o[3]||(o[3]=t=>s.page=t),onClick:C},{"first-page-button":r(()=>[oe]),"prev-button":r(()=>[ae]),"next-button":r(()=>[le]),"last-page-button":r(()=>[ne]),_:1},8,["total-items","items-per-page","modelValue"])]),e("div",null,[y(v,{to:{name:"board/create",query:m(n).query},class:"btn btn-primary"},{default:r(()=>[re,i(" 글 작성")]),_:1},8,["to"])])])])}}};export{pe as default};
