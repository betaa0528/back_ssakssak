import{u as T,a as L,c as N,d as _,r as D,p as I,j as w,o as p,e as d,f as e,g as i,F as x,q as k,w as m,s as M,x as B,v as K,y as U,t as o,k as c,l as r,z as f,A as Y}from"./index-gxZJ1D_R.js";import{b as A}from"./boardApi-OemPiS-N.js";import{h as R}from"./moment-C5S46NFB.js";const S={class:"mt-4"},E=["id","value"],F=["for"],P={class:"row mt-2"},j={class:"col-3"},z={class:"col-8"},H={class:"mt-3 text-end"},W={class:"table table-striped"},G={class:"my-5 d-flex"},J={class:"flex-grow-1 text-center"},$={__name:"BoardListPage",setup(O){const n=T(),b=L(),l=N({}),C=_(()=>l.value.boardList),a=D({page:parseInt(n.query.page)||1,amount:parseInt(n.query.amount)||12,searchType:"",searchValue:"",types:[]}),V=async u=>{console.log("CLICK,,,,"),b.push({query:{page:u,amount:a.amount,searchType:a.searchType,searchValue:a.searchValue,types:a.types}})},v=async()=>{console.log("CLICK,,,,"),b.push({query:{page:a.page,amount:a.amount,searchType:a.searchType,searchValue:a.searchValue,types:a.types}})};I(n,async u=>{console.log("WATCH",n.query.page),await g(n.query)});const g=async u=>{try{l.value=await A.getList(u),console.log(l.value),a.types.length==0&&l.value.boardCategory.forEach(t=>{a.types.push(t.type)})}catch{}};return g(a),(u,t)=>{const h=w("router-link"),q=w("vue-awesome-paginate");return p(),d("div",null,[t[15]||(t[15]=e("h1",{class:"mb-3"},[e("i",{class:"fa-solid fa-paste"}),i(" 게시글 목록")],-1)),e("div",S,[t[4]||(t[4]=e("div",{class:"form-label"},"type",-1)),(p(!0),d(x,null,k(l.value.boardCategory,s=>(p(),d("div",{key:s.type,class:"form-check form-check-inline"},[m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=y=>a.types=y),checked:"",class:"form-check-input",type:"checkbox",id:s.type,value:s.type},null,8,E),[[Y,a.types]]),e("label",{class:"form-check-label",for:s.type},o(s.name),9,F)]))),128))]),e("div",P,[e("div",j,[t[6]||(t[6]=e("label",{class:"form-label"},"검색 종류",-1)),m(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>a.searchType=s),class:"form-select",required:""},t[5]||(t[5]=[B('<option value="">선택하세요.</option><option value="all">전체</option><option value="title">제목</option><option value="content">내용</option><option value="writer">글쓴이</option>',5)]),512),[[M,a.searchType]])]),e("div",z,[t[7]||(t[7]=e("label",{class:"form-label"},"검색어",-1)),m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>a.searchValue=s),onKeyup:U(v,["enter"]),type:"text",class:"form-control",placeholder:"내용을 입력하세요."},null,544),[[K,a.searchValue]])]),e("div",{class:"col-1"},[t[8]||(t[8]=e("label",{class:"form-label"},[i("   "),e("span",{class:"text-body-secondary"})],-1)),e("button",{class:"form-control btn btn-primary",onClick:v},"검색")])]),e("div",H,"(총 "+o(l.value.totalCount)+"건)",1),e("table",W,[t[9]||(t[9]=e("thead",null,[e("tr",null,[e("th",{style:{width:"60px"}},"No"),e("th",{style:{width:"100px"}},"Type"),e("th",null,"제목"),e("th",{style:{width:"150px"}},"작성자"),e("th",{style:{width:"120px"}},"작성일"),e("th",{style:{width:"80px"}},"조회수")])],-1)),e("tbody",null,[(p(!0),d(x,null,k(C.value,s=>(p(),d("tr",{key:s.bno},[e("td",null,o(s.bno),1),e("td",null,o(l.value.boardCategory.filter(y=>{if(y.type==s.type)return s.type})[0].name),1),e("td",null,[c(h,{to:{name:"board/detail",params:{no:s.bno},query:f(n).query}},{default:r(()=>[i(o(s.title),1)]),_:2},1032,["to"])]),e("td",null,o(s.memberName)+"("+o(s.memberId)+")",1),e("td",null,o(f(R)(s.regDate).format("YYYY-MM-DD")),1),e("td",null,o(s.readCount),1)]))),128))])]),e("div",G,[e("div",J,[c(q,{"total-items":l.value.totalCount,"items-per-page":a.amount,"max-pages-shown":5,"show-ending-buttons":!0,modelValue:a.page,"onUpdate:modelValue":t[3]||(t[3]=s=>a.page=s),onClick:V},{"first-page-button":r(()=>t[10]||(t[10]=[e("i",{class:"fa-solid fa-backward-fast"},null,-1)])),"prev-button":r(()=>t[11]||(t[11]=[e("i",{class:"fa-solid fa-caret-left"},null,-1)])),"next-button":r(()=>t[12]||(t[12]=[e("i",{class:"fa-solid fa-caret-right"},null,-1)])),"last-page-button":r(()=>t[13]||(t[13]=[e("i",{class:"fa-solid fa-forward-fast"},null,-1)])),_:1},8,["total-items","items-per-page","modelValue"])]),e("div",null,[c(h,{to:{name:"board/create",query:f(n).query},class:"btn btn-primary"},{default:r(()=>t[14]||(t[14]=[e("i",{class:"fa-solid fa-pen-to-square"},null,-1),i(" 글 작성")])),_:1},8,["to"])])])])}}};export{$ as default};
