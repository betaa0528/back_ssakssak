import{b as _,a as x,c as m,r as h,d as k,j as V,o as p,e as c,f as a,g as t,t as f,w as d,v as u,h as N,k as S,l as P,i as B}from"./index-gxZJ1D_R.js";import{a as C}from"./authApi-CxMn13P0.js";const U={class:"mt-5 mx-auto",style:{width:"500px"}},j={class:"mb-3 mt-3"},A=["src"],D={class:"mb-3 mt-3"},E={class:"mb-3 mt-3"},M={class:"mb-3 mt-3"},T={class:"mb-3"},R={key:0,class:"text-danger"},$={class:"text-center"},q=["disabled"],H={__name:"ProfilePage",setup(z){const l=_(),v=x(),i=m(null),b=m(`/api/member/${l.id}/avatar`),e=h({id:l.id,name:l.name,email:l.email,password:"",avatar:null}),r=m(""),g=k(()=>!e.email||!e.password),w=async()=>{if(i.value.files.length>0&&(e.avatar=i.value.files[0]),console.log(l),!!confirm("수정하시겠습니까?"))try{await C.update(e),r.value="",l.changeProfile(e),alert("정보를 수정하였습니다."),v.go(0)}catch(n){console.log(n),r.value=n.response.data}};return(n,s)=>{const y=V("router-link");return p(),c("div",U,[s[9]||(s[9]=a("h1",null,[a("i",{class:"fa-solid fa-user-gear my-3"}),t(" 회원 정보")],-1)),a("form",{onSubmit:B(w,["prevent"])},[a("div",j,[a("img",{src:b.value,class:"avatar avatar-lg me-4"},null,8,A),t(" "+f(e.id),1)]),a("div",D,[s[3]||(s[3]=a("label",{for:"avatar",class:"form-label"},[a("i",{class:"fa-solid fa-user-astronaut"}),t(" 아바타 이미지: ")],-1)),a("input",{type:"file",class:"form-control",ref_key:"avatar",ref:i,id:"avatar",accept:"image/png, image/jpeg"},null,512)]),a("div",E,[s[4]||(s[4]=a("label",{for:"name",class:"form-label"},[a("i",{class:"fa-solid fa-circle-user"}),t(" name ")],-1)),d(a("input",{type:"text",class:"form-control",placeholder:"Name",id:"name","onUpdate:modelValue":s[0]||(s[0]=o=>e.name=o)},null,512),[[u,e.name]])]),a("div",M,[s[5]||(s[5]=a("label",{for:"email",class:"form-label"},[a("i",{class:"fa-solid fa-envelope"}),t(" email ")],-1)),d(a("input",{type:"email",class:"form-control",placeholder:"Email",id:"email","onUpdate:modelValue":s[1]||(s[1]=o=>e.email=o)},null,512),[[u,e.email]])]),a("div",T,[s[6]||(s[6]=a("label",{for:"password",class:"form-label"},[a("i",{class:"fa-solid fa-lock"}),t(" 비밀번호: ")],-1)),d(a("input",{type:"password",class:"form-control",placeholder:"비밀번호",id:"password","onUpdate:modelValue":s[2]||(s[2]=o=>e.password=o)},null,512),[[u,e.password]])]),r.value?(p(),c("div",R,f(r.value),1)):N("",!0),a("div",$,[a("button",{type:"submit",class:"btn btn-primary mt-4 me-3",disabled:g.value},s[7]||(s[7]=[a("i",{class:"fa-solid fa-user-plus"},null,-1),t(" 확인 ")]),8,q),S(y,{class:"btn btn-primary mt-4",to:"/auth/changepassword"},{default:P(()=>s[8]||(s[8]=[a("i",{class:"fa-solid fa-lock"},null,-1),t(" 비밀번호 변경 ")])),_:1})])],32)])}}};export{H as default};
