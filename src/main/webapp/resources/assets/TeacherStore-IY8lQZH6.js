import{m as D,_ as B,d as L,c as r,E as U,o as x,e as y,f as t,w as h,v,F as S,q as N,t as g,B as P,C as R}from"./index-DvTNLHIP.js";const C="/api/teacher/store",F={async getCouponlist(){try{const{data:a}=await D.get(`${C}/coupon-list`);return a}catch(a){throw console.error("Failed to fetch coupon list:",a),a}},async applyCoupon(a,f){try{const n=new FormData;n.append("storeDTO",JSON.stringify(a)),n.append("file",f);const{data:c}=await D.post(`${C}/coupon-apply`,n);return c}catch(n){throw console.error("Failed to apply coupon:",n),n}}},l=a=>(P("data-v-7e8c8437"),a=a(),R(),a),V={class:"container my-5 p-5 rounded",style:{"background-color":"#fff"}},O=l(()=>t("h4",{class:"mb-3 text-muted"},"매점 상품 등록",-1)),j={class:"row mb-4"},E={class:"col-md-4 d-flex justify-content-center align-items-center flex-column"},Q={class:"image-upload-label"},K=["src"],M=l(()=>t("small",{class:"text-muted mt-2"},"상품사진등록",-1)),$=l(()=>t("small",{class:"text-muted mt-2"},".png, .jpg, .jpeg 파일만 등록 가능합니다.",-1)),q={class:"col-md-8"},A={class:"form-group mb-3"},J=l(()=>t("label",{class:"text-muted"},"상품명",-1)),z={class:"form-group mb-3"},G=l(()=>t("label",{class:"text-muted"},"상품설명",-1)),H={class:"row mb-4"},W={class:"col-md-6"},X=l(()=>t("label",{class:"text-muted"},"상품가격",-1)),Y={class:"input-group"},Z=l(()=>t("span",{class:"input-group-text text-muted"},"씨드",-1)),tt={class:"col-md-6"},et=l(()=>t("label",{class:"text-muted"},"상품수량",-1)),ot={class:"input-group"},st=l(()=>t("span",{class:"input-group-text text-muted"},"개",-1)),at={class:"container md-4 p-5 rounded",style:{"background-color":"#fff"}},lt={class:"mt-0"},nt=l(()=>t("h4",{class:"mb-3 text-muted"},"상품 등록 내역",-1)),ct={class:"table custom-table"},rt=l(()=>t("thead",{class:"table-light"},[t("tr",null,[t("th",{class:"text-muted"},"날짜"),t("th",{class:"text-muted"},"상품명"),t("th",{class:"text-muted"},"상품가격"),t("th",{class:"text-muted"},"상품수량")])],-1)),dt=["textContent"],ut={class:"text-muted"},it={class:"text-muted"},pt={class:"text-muted"},mt={__name:"TeacherStore",setup(a){const f=()=>new Date().toISOString("T").slice(0,19),n=L(()=>b.value.slice().sort((o,e)=>{const s=new Date(o.cpDate);return new Date(e.cpDate)-s})),c=r(""),d=r(""),u=r(0),i=r(0),b=r([]),p=r(null),w=async()=>{try{const o=await F.getCouponlist();console.log("상품 목록 데이터:",o),b.value=o}catch(o){console.error("Failed to fetch store items:",o)}};U(()=>{w()});const I=async()=>{if(c.value&&d.value&&u.value&&i.value&&m.value){const o={cpImage:p.value,cpName:c.value,cpContent:d.value,cpPrice:u.value,cpQuantity:i.value,cpDate:f()};try{const e=await F.applyCoupon(o,m.value);console.log("상품 등록 성공:",e),await w(),c.value="",d.value="",u.value=0,i.value=0,p.value=null,m.value=null}catch(e){console.error("상품 등록 실패:",e)}}else alert("내용을 모두 입력하고 이미지를 등록해주세요.")},m=r(null),k=o=>{const e=o.target.files[0];if(e){m.value=e;const s=new FileReader;s.onload=_=>{p.value=_.target.result},s.readAsDataURL(e)}},T=o=>typeof o=="string"?new Date(o).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}):Array.isArray(o)?new Date(o[0],o[1]-1,o[2]).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}):"";return(o,e)=>(x(),y(S,null,[t("div",V,[O,t("div",j,[t("div",E,[t("label",Q,[t("img",{src:p.value||"https://via.placeholder.com/150",class:"img-thumbnail"},null,8,K),t("input",{type:"file",class:"d-none",onChange:k},null,32)]),M,$]),t("div",q,[t("div",A,[J,h(t("input",{type:"text",class:"form-control text-muted","onUpdate:modelValue":e[0]||(e[0]=s=>c.value=s),placeholder:"상품명을 입력하세요"},null,512),[[v,c.value]])]),t("div",z,[G,h(t("textarea",{class:"form-control text-muted","onUpdate:modelValue":e[1]||(e[1]=s=>d.value=s),placeholder:"상품 설명을 입력하세요"},null,512),[[v,d.value]])])])]),t("div",H,[t("div",W,[X,t("div",Y,[h(t("input",{type:"number",class:"form-control text-muted","onUpdate:modelValue":e[2]||(e[2]=s=>u.value=s)},null,512),[[v,u.value]]),Z])]),t("div",tt,[et,t("div",ot,[h(t("input",{type:"number",class:"form-control text-muted","onUpdate:modelValue":e[3]||(e[3]=s=>i.value=s)},null,512),[[v,i.value]]),st])])]),t("div",{class:"text-center"},[t("button",{class:"btn btn-warning px-5",onClick:I},"등록")])]),t("div",at,[t("div",lt,[nt,t("table",ct,[rt,t("tbody",null,[(x(!0),y(S,null,N(n.value,(s,_)=>(x(),y("tr",{key:_},[t("td",{class:"text-muted",textContent:g(T(s.cpDate))},null,8,dt),t("td",ut,g(s.cpName),1),t("td",it,g(s.cpPrice)+" 씨드",1),t("td",pt,g(s.cpQuantity)+" 개",1)]))),128))])])])])],64))}},ht=B(mt,[["__scopeId","data-v-7e8c8437"]]);export{ht as default};
