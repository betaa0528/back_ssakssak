import{_ as N,b as B,u as F,a as L,c as h,o as a,e as r,f as t,t as s,g as d,z as b,F as p,q as w,h as g,w as M,v as A}from"./index-gxZJ1D_R.js";import{b as f}from"./boardApi-OemPiS-N.js";import{h as x}from"./moment-C5S46NFB.js";const V=async k=>{try{const o=document.createElement("a");o.href=k,document.body.appendChild(o),o.click(),document.body.removeChild(o)}catch(o){console.error(o)}},E={class:"my-3 d-flex justify-content-between"},T={class:"text-end"},$=["onClick"],j={class:"content"},H={class:"my-5"},P={class:"row mt-2"},S={class:"col-11"},U={class:"col-1"},z={class:"table table-striped mt-4"},O={key:0},G=["onClick"],J={__name:"BoardDetailPage",setup(k){const o=B(),c=F(),v=L(),m=c.params.no,n=h({}),i=h(""),C=()=>{v.push({name:"board/list",query:c.query})},_=()=>{v.push({name:"board/update",params:{no:m},query:c.query})},D=async u=>{const e="/api/board/download/"+u;console.log(e),await V(e)},q=async()=>{confirm("삭제할까요?")&&(await f.delete(m),v.push({name:"board/list",query:c.query}))},y=async()=>{n.value=await f.get(m),console.log("DETAIL",n.value)};y();const Y=async()=>{if(i.value==null||i.value.length==0){alert("내용이 없습니다.");return}const u={bno:m,content:i.value,writer:o.id},e=await f.sendReply(u);console.log(e),e!=null?(alert("댓글이 등록 되었습니다."),y()):alert("댓글 등록에 실패 하였습니다.")},R=async u=>{const e=await f.deleteReply(u);console.log(e),e!=null?(alert("댓글이 삭제 되었습니다."),y()):alert("댓글 삭제에 실패 하였습니다.")};return(u,e)=>(a(),r(p,null,[t("h1",null,s(n.value.title),1),t("div",E,[t("div",null,[e[2]||(e[2]=t("i",{class:"fa-solid fa-user"},null,-1)),d(" "+s(n.value.memberName)+" ("+s(n.value.memberId)+") ",1)]),t("div",null,[e[3]||(e[3]=t("i",{class:"fa-regular fa-clock"},null,-1)),d(" "+s(b(x)(n.value.updateDate).format("YYYY-MM-DD HH:mm")),1)])]),e[11]||(e[11]=t("hr",null,null,-1)),t("div",T,[(a(!0),r(p,null,w(n.value.boardAttachFileList,l=>(a(),r("div",{key:l.fno,class:"attach"},[t("span",{onClick:I=>D(l.fno)},[e[4]||(e[4]=t("i",{class:"fa-solid fa-paperclip"},null,-1)),d(" "+s(l.originalFilename),1)],8,$)]))),128))]),t("div",j,s(n.value.content),1),t("div",H,[t("button",{class:"btn btn-primary me-2",onClick:C},e[5]||(e[5]=[t("i",{class:"fa-solid fa-list"},null,-1),d(" 목록")])),b(o).id==n.value.memberId?(a(),r(p,{key:0},[t("button",{class:"btn btn-primary me-2",onClick:_},e[6]||(e[6]=[t("i",{class:"fa-regular fa-pen-to-square"},null,-1),d(" 수정")])),t("button",{class:"btn btn-danger",onClick:q},e[7]||(e[7]=[t("i",{class:"fa-solid fa-trash-can"},null,-1),d(" 삭제")]))],64)):g("",!0)]),t("div",P,[t("div",S,[e[8]||(e[8]=t("label",{class:"form-label"},"댓글",-1)),M(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>i.value=l),type:"text",class:"form-control",placeholder:"내용을 입력하세요."},null,512),[[A,i.value]])]),t("div",U,[e[9]||(e[9]=t("label",{class:"form-label"},[d("   "),t("span",{class:"text-body-secondary"})],-1)),t("button",{class:"form-control btn btn-primary",onClick:e[1]||(e[1]=l=>Y())},"작성")])]),t("table",z,[e[10]||(e[10]=t("thead",null,[t("tr",null,[t("th",{style:{width:"60px"}},"No"),t("th",null,"댓글 내용"),t("th",{style:{width:"150px"}},"작성자"),t("th",{style:{width:"120px"}},"작성일"),t("th",{style:{width:"80px"}})])],-1)),t("tbody",null,[(a(!0),r(p,null,w(n.value.replyList,l=>(a(),r("tr",{key:l.rno},[t("td",null,s(l.rno),1),t("td",null,s(l.content),1),t("td",null,s(l.memberName)+"("+s(l.memberId)+")",1),t("td",null,s(b(x)(l).format("YYYY-MM-DD")),1),t("td",null,[l.memberId==b(o).id?(a(),r("span",O,[t("button",{class:"btn btn-close",onClick:I=>R(l.rno)},null,8,G)])):g("",!0)])]))),128))])])],64))}},X=N(J,[["__scopeId","data-v-626d2dd2"]]);export{X as default};
