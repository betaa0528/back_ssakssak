import{_ as k,d as T,c as l,C as F,o as g,e as x,f as t,w as m,v as p,F as _,q as I,t as v}from"./index-gxZJ1D_R.js";import{s as y}from"./teacherStoreApi-CSevR6as.js";const B={class:"container my-5 p-5 rounded",style:{"background-color":"#fff"}},L={class:"row mb-4"},P={class:"col-md-4 d-flex justify-content-center align-items-center flex-column"},U={class:"image-upload-label"},V=["src"],N={class:"col-md-8"},R={class:"form-group mb-3"},j={class:"form-group mb-3"},Q={class:"row mb-4"},K={class:"col-md-6"},M={class:"input-group"},O={class:"col-md-6"},q={class:"input-group"},E={class:"container md-4 p-5 rounded",style:{"background-color":"#fff"}},z={class:"mt-0"},A={class:"table custom-table"},G=["textContent"],H={class:"text-muted"},J={class:"text-muted"},W={class:"text-muted"},X={__name:"TeacherStore",setup(Y){const D=()=>new Date().toISOString("T").slice(0,19),w=T(()=>f.value.slice().sort((s,e)=>{const o=new Date(s.cpDate);return new Date(e.cpDate)-o})),a=l(""),n=l(""),u=l(0),r=l(0),f=l([]),d=l(null),b=async()=>{try{const s=await y.getCouponlist();console.log("상품 목록 데이터:",s),f.value=s}catch(s){console.error("Failed to fetch store items:",s)}};F(()=>{b()});const h=async()=>{if(a.value&&n.value&&u.value&&r.value&&c.value){const s={cpImage:d.value,cpName:a.value,cpContent:n.value,cpPrice:u.value,cpQuantity:r.value,cpDate:D()};try{const e=await y.applyCoupon(s,c.value);console.log("상품 등록 성공:",e),await b(),a.value="",n.value="",u.value=0,r.value=0,d.value=null,c.value=null}catch(e){console.error("상품 등록 실패:",e)}}else alert("내용을 모두 입력하고 이미지를 등록해주세요.")},c=l(null),C=s=>{const e=s.target.files[0];if(e){c.value=e;const o=new FileReader;o.onload=i=>{d.value=i.target.result},o.readAsDataURL(e)}},S=s=>typeof s=="string"?new Date(s).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}):Array.isArray(s)?new Date(s[0],s[1]-1,s[2]).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}):"";return(s,e)=>(g(),x(_,null,[t("div",B,[e[12]||(e[12]=t("h4",{class:"mb-3 text-muted"},"매점 상품 등록",-1)),t("div",L,[t("div",P,[t("label",U,[t("img",{src:d.value||"https://via.placeholder.com/150",class:"img-thumbnail"},null,8,V),t("input",{type:"file",class:"d-none",onChange:C},null,32)]),e[4]||(e[4]=t("small",{class:"text-muted mt-2"},"상품사진등록",-1)),e[5]||(e[5]=t("small",{class:"text-muted mt-2"},".png, .jpg, .jpeg 파일만 등록 가능합니다.",-1))]),t("div",N,[t("div",R,[e[6]||(e[6]=t("label",{class:"text-muted"},"상품명",-1)),m(t("input",{type:"text",class:"form-control text-muted","onUpdate:modelValue":e[0]||(e[0]=o=>a.value=o),placeholder:"상품명을 입력하세요"},null,512),[[p,a.value]])]),t("div",j,[e[7]||(e[7]=t("label",{class:"text-muted"},"상품설명",-1)),m(t("textarea",{class:"form-control text-muted","onUpdate:modelValue":e[1]||(e[1]=o=>n.value=o),placeholder:"상품 설명을 입력하세요"},null,512),[[p,n.value]])])])]),t("div",Q,[t("div",K,[e[9]||(e[9]=t("label",{class:"text-muted"},"상품가격",-1)),t("div",M,[m(t("input",{type:"number",class:"form-control text-muted","onUpdate:modelValue":e[2]||(e[2]=o=>u.value=o)},null,512),[[p,u.value]]),e[8]||(e[8]=t("span",{class:"input-group-text text-muted"},"씨드",-1))])]),t("div",O,[e[11]||(e[11]=t("label",{class:"text-muted"},"상품수량",-1)),t("div",q,[m(t("input",{type:"number",class:"form-control text-muted","onUpdate:modelValue":e[3]||(e[3]=o=>r.value=o)},null,512),[[p,r.value]]),e[10]||(e[10]=t("span",{class:"input-group-text text-muted"},"개",-1))])])]),t("div",{class:"text-center"},[t("button",{class:"btn btn-warning px-5",onClick:h},"등록")])]),t("div",E,[t("div",z,[e[14]||(e[14]=t("h4",{class:"mb-3 text-muted"},"상품 등록 내역",-1)),t("table",A,[e[13]||(e[13]=t("thead",{class:"table-light"},[t("tr",null,[t("th",{class:"text-muted"},"날짜"),t("th",{class:"text-muted"},"상품명"),t("th",{class:"text-muted"},"상품가격"),t("th",{class:"text-muted"},"상품수량")])],-1)),t("tbody",null,[(g(!0),x(_,null,I(w.value,(o,i)=>(g(),x("tr",{key:i},[t("td",{class:"text-muted",textContent:v(S(o.cpDate))},null,8,G),t("td",H,v(o.cpName),1),t("td",J,v(o.cpPrice)+" 씨드",1),t("td",W,v(o.cpQuantity)+" 개",1)]))),128))])])])])],64))}},tt=k(X,[["__scopeId","data-v-7e8c8437"]]);export{tt as default};
