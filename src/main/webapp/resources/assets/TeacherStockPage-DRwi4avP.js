import{S as j}from"./StockChartLayout-DYxMFNkT.js";import{m,_ as x,c as S,o as i,e as d,f as t,i as E,w as g,v as y,B as C,C as N,d as $,E as R,F as k,q as B,t as _,P as T,g as q,n as v,h as L,k as f}from"./index-DvTNLHIP.js";import{u as F}from"./stockStore-C02B7glj.js";/* empty css                                                                        */import"./studentStockApi-kF3M_Z2u.js";const w="/api/teacher/stock",D={async getStockNewsList(){const{data:o}=await m.get(`${w}/news/list`);return o},async addRate(o){try{const a=await m.post(`${w}/rate-apply`,o);console.log("등락률 추가 결과",a)}catch(a){throw a}},async addNews(o){try{return await m.post(`${w}/news`,o)}catch(a){throw a}},async delete(o){try{return await m.post(`${w}/news/${o}`)}catch(a){throw a}}},b=o=>(C("data-v-507e5fd1"),o=o(),N(),o),z={class:"modal-wrap"},A={class:"modal-container p-4 shadow-lg rounded bg-white"},Y=b(()=>t("h4",{class:"mb-4"},"뉴스 입력하기",-1)),G={class:"mb-3"},H=b(()=>t("label",{for:"title",class:"form-label"},"제목",-1)),J={class:"mb-3"},K=b(()=>t("label",{for:"content",class:"form-label"},"내용",-1)),O=b(()=>t("button",{type:"submit",class:"btn btn-primary"},"등록",-1)),Q={__name:"StockCreateNewsModal",emits:["closeModal","submitForm"],setup(o,{emit:a}){const c=F(),r=S({title:"",content:""}),u=a,l=async()=>{const s=await D.addNews(r.value);s.status===200&&p(),console.log(s),await c.fetchNewsList()},p=()=>{u("close")};return(s,n)=>(i(),d("div",z,[t("div",A,[Y,t("form",{onSubmit:E(l,["prevent"])},[t("div",G,[H,g(t("input",{type:"text",id:"title",class:"form-control","onUpdate:modelValue":n[0]||(n[0]=e=>r.value.title=e),placeholder:"제목을 입력하세요"},null,512),[[y,r.value.title]])]),t("div",J,[K,g(t("textarea",{id:"content",class:"form-control",rows:"5","onUpdate:modelValue":n[1]||(n[1]=e=>r.value.content=e),placeholder:"내용을 입력하세요"},null,512),[[y,r.value.content]])]),t("div",{class:"d-flex justify-content-end"},[t("button",{type:"button",class:"btn btn-secondary me-2",onClick:p},"취소"),O])],32)])]))}},W=x(Q,[["__scopeId","data-v-507e5fd1"]]),P=o=>(C("data-v-28d20536"),o=o(),N(),o),X={class:"container"},Z={class:"shadow card p-4"},tt=P(()=>t("div",{class:"mb-3"},[t("span",{class:"fs-2 fw-bold"},"주식 뉴스 관리")],-1)),st={class:"cardBody p-0"},et={class:"list-group px-2"},ot={class:"fw-semibold"},at=["onClick"],nt=P(()=>t("i",{class:"bi bi-trash"},null,-1)),ct=[nt],lt={__name:"StockNewsCreate",setup(o){const a=F(),c=$(()=>a.newsList);R(()=>{a.fetchNewsList()});const r=async s=>{(await D.delete(s)).status===200&&a.fetchNewsList()},u=S(!1),l=()=>{u.value=!u.value},p=s=>{console.log(s),newsData.value.push(s),l()};return(s,n)=>(i(),d(k,null,[t("div",X,[t("div",Z,[tt,t("div",st,[t("ul",et,[(i(!0),d(k,null,B(c.value,(e,h)=>(i(),d("li",{class:"list-group-item border-0 px-0 py-2 d-flex justify-content-between align-items-center",key:h,style:{"border-bottom":"1px solid rgba(0, 0, 0, 0.1)",transition:"background-color 0.3s"}},[t("span",null,_(e.newsDate),1),t("span",ot,_(e.title),1),t("button",{type:"button",class:"btn btn-sm btn-outline-danger me-3",onClick:I=>r(e.newsId)},ct,8,at)]))),128))]),t("div",{class:"mt-3"},[t("button",{class:"btn btn-primary btn-lg w-100",onClick:l}," 새 뉴스 만들기 ")])])])]),u.value?(i(),T(W,{key:0,onSubmitForm:p,onClose:l})):q("",!0)],64))}},rt=x(lt,[["__scopeId","data-v-28d20536"]]),M=o=>(C("data-v-0a1bc1d0"),o=o(),N(),o),it={class:"container"},dt={class:"shadow card p-4"},ut=M(()=>t("div",null,[t("span",{class:"fs-2 fw-bold"},"주식 등락률 관리")],-1)),pt={class:"section"},_t={class:"list-group"},ht={class:"fs-6 fw-semibold"},mt={class:"mt-2"},vt=M(()=>t("span",{class:"fs-5 fw-semibold ps-2"},"주식 등락률 설정",-1)),wt={class:"row d-flex align-items-center"},bt=M(()=>t("div",{class:"col-3"},[t("span",{class:"fs-6 fw-bold ps-3"},"오늘 등락률: ")],-1)),ft={class:"col-9 d-flex p-0"},gt={__name:"StockRate",setup(o){const a=F();R(async()=>{await a.fetchChartData()});const c=$(()=>a.chartData),r=s=>s.getFullYear()+"-"+(s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1)+"-"+(s.getDate()<10?"0"+s.getDate():s.getDate()),u=$(()=>{const s=[];if(c.value&&c.value.length>0){for(let n=c.value.length-1;n>=c.value.length-5;n--)if(n>=0){console.log(c.value[n]);const e=c.value[n].stockPrice,h=new Date(c.value[n].stockDate),I=r(h),V=c.value[n].change,U={price:e,day:I,change:V};s.push(U)}}return s}),l=S(""),p=async()=>{if(l.value>100){alert("0에서 100사이의 숫자로 입력해주세요");return}else{if(l.value==="")return;if(isNaN(l.value)){alert("숫자만 입력해주세요"),l.value="";return}}try{const n=c.value[c.value.length-1].stockPrice*(1+parseFloat(l.value)/100),e={change:l.value,stock_price:parseInt(n)};await D.addRate(e),l.value="",await a.fetchChartData()}catch(s){console.error(s)}};return(s,n)=>(i(),d("div",it,[t("div",dt,[ut,t("div",pt,[t("ul",_t,[(i(!0),d(k,null,B(u.value,(e,h)=>(i(),d("li",{key:h,class:v(["list-group-item border-0 p-3 mb-2 d-flex justify-content-between align-items-center shadow-sm rounded",{"bg-light-success":parseFloat(e)>0,"bg-light-danger":parseFloat(e)<0}])},[t("span",ht,[L(_(e.day)+" : ",1),t("span",{class:v(parseFloat(e.change)>0?"text-danger":"txt-primary")},_(e.price),3),L(" 씨드 "),t("span",{class:v(parseFloat(e.change)>0?"text-danger":"txt-primary")},"   "+_(e.change)+"% ",3),t("span",null,_(e.change>0?e.change===0?"보합":"상승":"하락"),1)]),t("i",{class:v([parseFloat(e.change)>0?"bi bi-arrow-up text-danger":"bi bi-arrow-down txt-primary","fs-5"])},null,2)],2))),128))])]),t("div",mt,[vt,t("div",wt,[bt,t("div",ft,[g(t("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=e=>l.value=e),class:"form-control w-75 mx-2",placeholder:"등락률을 입력하세요 (%)"},null,512),[[y,l.value]]),t("button",{class:"btn btn-primary",onClick:p}," 확인 ")])])])])]))}},yt=x(gt,[["__scopeId","data-v-0a1bc1d0"]]),$t={class:"container mt-3",style:{width:"90vw"}},kt={class:"row"},xt={class:"col-12"},St={class:"row mt-3 g-0"},Ct={class:"col-6"},Nt={class:"col-6"},Rt={__name:"TeacherStockPage",setup(o){return(a,c)=>(i(),d("div",$t,[t("div",kt,[t("div",xt,[f(j)])]),t("div",St,[t("div",Ct,[f(yt)]),t("div",Nt,[f(rt)])])]))}};export{Rt as default};
