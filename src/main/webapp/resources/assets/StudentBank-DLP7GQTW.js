import{_ as st,d as v,C as et,c as u,o,e as i,f as t,F as p,q as y,t as a,h as b,w,v as V,s as nt,g as S}from"./index-gxZJ1D_R.js";import{_ as U}from"./tree1-DF5lsKKK.js";import{u as lt,B as C}from"./bankStore-B8RJ-S8h.js";import"./teacherClassApi-G0G2uyYe.js";const at={class:"container mt-2 mt-lg-5 mb-lg-4 my-xl-5"},ot={class:"card-header"},it={class:"card-body"},dt={class:"table"},ut={style:{color:"blue"}},rt=["onClick"],ct={class:"container mt-2 mt-lg-5 mb-lg-4 my-xl-5"},vt={class:"card-header"},pt={class:"card-body"},bt={class:"table"},mt={style:{color:"blue"}},ft=["onClick"],Dt={id:"specificSavingsPlan",class:"savings-plans"},gt={class:"savingCard"},yt={class:"card-header"},_t={class:"alert alert-primary",role:"alert"},ht={class:"card-body"},xt={class:"d-flex justify-content-between align-items-center pb-2 mb-3"},kt={class:"text-muted ps-5",style:{"text-align":"left"}},wt={class:"d-flex justify-content-between align-items-center pb-2 mb-3"},St={class:"text-muted"},Ct={class:"d-flex justify-content-between align-items-center pb-2 mb-3"},At={class:"text-muted"},Nt=["onClick","disabled"],It={class:"savings-plans"},Pt={class:"savingCard"},$t={class:"card-header"},Mt={class:"alert alert-primary",role:"alert"},Lt={class:"card-body"},Bt={class:"d-flex justify-content-between align-items-center pb-2 mb-3"},jt={class:"text-muted ps-5",style:{"text-align":"left"}},Vt={class:"d-flex justify-content-between align-items-center pb-2 mb-3"},Tt={class:"text-muted"},Rt={class:"d-flex justify-content-between align-items-center pb-2 mb-3"},Ut={class:"text-muted"},qt=["onClick","disabled"],Ft={key:0,class:"modal"},Wt={class:"modal-content"},Ot={key:0},Et={key:1},Yt={key:2},zt={key:3},Gt={key:1,class:"modal"},Ht={class:"modal-content"},Jt={key:0},Kt={key:1},Qt={key:2},Xt={key:3},Zt={class:"container mt-2 mt-lg-5 mb-lg-4 my-xl-5"},ts={class:"card-header"},ss={class:"input-section"},es={class:"form-group"},ns=["value"],ls={class:"form-group"},as=["value"],os={class:"form-group"},is={class:"amount-input"},ds={class:"result-section"},us={class:"result-item"},rs={class:"result-item"},cs={class:"result-item"},vs={__name:"StudentBank",setup(ps){const d=lt(),A=v(()=>d.depositList),N=v(()=>d.myDepositList),I=v(()=>d.savingList),P=v(()=>d.mySavingList);et(async()=>{await d.fetchDepositList(),await d.fetchDepositAccount(),await d.fetchSavingList(),await d.fetchSavingAccount()}),console.log(N),console.log(P);const $=u(!1),_=u(""),m=u(100),f=u(!1),q=n=>{_.value=n.savingName,$.value=!0},F=()=>{$.value=!1,f.value=!1,m.value=100},M=u(!1),h=u(""),D=u(100),g=u(!1),W=n=>{h.value=n.depositName,M.value=!0},O=()=>{M.value=!1,g.value=!1,D.value=100},T=(n,s)=>{const e=new Date(n);return e.setDate(e.getDate()+s*7),e},x=n=>{const s=n.getFullYear(),e=String(n.getMonth()+1).padStart(2,"0"),l=String(n.getDate()).padStart(2,"0");return`${s}-${e}-${l}`},E=async()=>{const n=new Date;let s;const e=A.value.find(c=>c.depositName===h.value);if(s=T(n,e.depositPeriod),D.value>e.maxDeposit){alert(`최대 금액을 초과했습니다! ${h.value}의 최대 금액은 ${maxAmount}입니다.`);return}const l={depositId:e.depositId,rate:e.rate,depositAmount:D.value,startDate:x(n),endDate:x(s)};await C.subscribeDeposit(l),g.value=!0,await d.fetchDepositAccount()},Y=async()=>{const n=new Date;let s;const e=I.value.find(c=>c.savingName===_.value);if(s=T(n,e.savingPeriod/7),m.value>e.maxDeposit){alert(`최대 금액을 초과했습니다! ${_.value}의 최대 금액은 ${e.maxDeposit}입니다.`);return}const l={savingId:e.savingId,savingName:e.savingName,rate:e.rate,depositAmount:m.value,startDate:x(n),endDate:x(s),totalAmount:0};await C.subscribeSaving(l),f.value=!0,await d.fetchSavingList()},z=n=>N.value.find(s=>s.depositId===n),G=n=>P.value.find(s=>s.savingId===n),H=async n=>{await C.cancelDeposit(n.accountId),alert(`${n.depositName} 적금을 해지합니다.`),await d.fetchDepositAccount()},J=async n=>{await C.cancelSaving(n.accountId),alert(`${n.savingName} 적금을 해지합니다.`),await d.fetchSavingAccount()},L=v(()=>{const n=[],s=[...A.value],e=[...I.value];for(const l of s)n.push({name:l.depositName,maxDeposit:l.maxDeposit,depositPeriod:l.depositPeriod,rate:l.rate});for(const l of e)n.push({name:l.savingName,maxDeposit:l.maxDeposit,depositPeriod:l.savingPeriod,rate:l.rate});return n}),k=u(""),r=u(100),K=v(()=>{const n=L.value.find(s=>s.name===k.value);if(n)return n.rate}),B=u(0),R=u(0),Q=()=>{const n=L.value.find(s=>s.name===k.value);if(n){let s=n.rate,e=n.depositPeriod,l=0;if(console.log("name",n.name),console.log("이율",n.rate),n.name.endsWith("예금")){const j=e/4;l=r.value*(s/100)*j}if(n.name.endsWith("적금")){const j=e/7;l=r.value*j*(s/100/12)}const c=l*.154,tt=l-c;B.value=Math.round(tt),R.value=r.value+B.value}},X=()=>{r.value+=10},Z=()=>{r.value>10&&(r.value-=10)};return(n,s)=>(o(),i(p,null,[s[32]||(s[32]=t("link",{rel:"stylesheet",href:"assets/css/theme.min.css"},null,-1)),s[33]||(s[33]=t("link",{rel:"stylesheet",href:"assets/css/theme.css"},null,-1)),s[34]||(s[34]=t("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"},null,-1)),t("div",at,[t("div",ot,[s[5]||(s[5]=t("h5",{class:"title"},"현재 가입중인 예금 상품",-1)),t("div",it,[t("table",dt,[s[4]||(s[4]=t("thead",null,[t("tr",null,[t("th",{id:"th1"},"상품 가입일"),t("th",{id:"th1"},"만기 예정일"),t("th",{id:"th1"},"상품명"),t("th",{id:"th1"},"적립액"),t("th",{id:"th1"},"해지하기")])],-1)),t("tbody",null,[(o(!0),i(p,null,y(N.value,(e,l)=>(o(),i("tr",{key:l},[t("td",null,a(e.startDate[0]+"-"+(e.startDate[1]<10?"0"+e.startDate[1]:e.startDate[1])+"-"+(e.startDate[2]<10?"0"+e.startDate[2]:e.startDate[2])),1),t("td",null,a(e.endDate[0]+"-"+(e.endDate[1]<10?"0"+e.endDate[1]:e.endDate[1])+"-"+(e.endDate[2]<10?"0"+e.endDate[2]:e.endDate[2])),1),t("td",null,a(e.depositName),1),t("td",ut,a(e.depositAmount)+" 씨드",1),t("td",null,[t("button",{class:"btn btn-outline-danger",onClick:c=>H(e)},"상품 해지",8,rt)])]))),128))])])])])]),t("div",ct,[t("div",vt,[s[7]||(s[7]=t("h5",{class:"title"},"현재 가입중인 적금 상품",-1)),t("div",pt,[t("table",bt,[s[6]||(s[6]=t("thead",null,[t("tr",null,[t("th",{id:"th1"},"상품 가입일"),t("th",{id:"th1"},"만기 예정일"),t("th",{id:"th1"},"상품명"),t("th",{id:"th1"},"적립액"),t("th",{id:"th1"},"해지하기")])],-1)),t("tbody",null,[(o(!0),i(p,null,y(P.value,(e,l)=>(o(),i("tr",{key:l},[t("td",null,a(e.startDate[0]+"-"+(e.startDate[1]<10?"0"+e.startDate[1]:e.startDate[1])+"-"+(e.startDate[2]<10?"0"+e.startDate[2]:e.startDate[2])),1),t("td",null,a(e.endDate[0]+"-"+(e.endDate[1]<10?"0"+e.endDate[1]:e.endDate[1])+"-"+(e.endDate[2]<10?"0"+e.endDate[2]:e.endDate[2])),1),t("td",null,a(e.savingName),1),t("td",mt,a(e.totalAmount)+" 씨드",1),t("td",null,[t("button",{class:"btn btn-outline-danger",onClick:c=>J(e.accountId)},"상품 해지",8,ft)])]))),128))])])])])]),s[35]||(s[35]=t("div",{class:"container"},[t("div",{class:"card-header"},[t("h5",{class:"title"},"가입 가능한 예금 상품 전체보기")])],-1)),t("div",Dt,[(o(!0),i(p,null,y(A.value,(e,l)=>(o(),i("div",{key:e.depositId,class:"card-safe"},[t("div",gt,[s[13]||(s[13]=t("img",{src:U,alt:"싹싹예금",class:"card-img",id:"card-img"},null,-1)),t("div",yt,[t("h4",null,a(e.depositName),1),t("div",_t,[s[8]||(s[8]=t("i",{class:"bi bi-bar-chart-line me-2",style:{"padding-bottom":"5px"}},null,-1)),S("금리 : "+a(e.rate)+"%",1),s[9]||(s[9]=t("i",{class:"bi bi-calendar4-week me-2",style:{"padding-left":"10px","padding-bottom":"5px"}},null,-1)),S("예치 기간 : "+a(e.depositPeriod)+"주 ",1)])]),t("div",ht,[t("div",xt,[s[10]||(s[10]=t("span",{class:"text-muted fw-bold d-block p-0"},"상품특징",-1)),t("span",kt,a(e.depositContent),1)]),t("div",wt,[s[11]||(s[11]=t("span",{class:"text-muted fw-bold"},"예치기간",-1)),t("span",St,a(e.depositPeriod)+"주",1)]),t("div",Ct,[s[12]||(s[12]=t("span",{class:"text-muted fw-bold"},"저축금액",-1)),t("span",At,"최대 "+a(e.maxDeposit)+"씨드",1)])]),t("button",{class:"btn2",onClick:c=>W(e),disabled:z(e.depositId)},"상품 가입하기",8,Nt)])]))),128))]),s[36]||(s[36]=t("div",{class:"container"},[t("div",{class:"card-header"},[t("h5",{class:"title"},"가입 가능한 적금 상품 전체보기")])],-1)),t("div",It,[(o(!0),i(p,null,y(I.value,(e,l)=>(o(),i("div",{key:e.savingId,class:"card-safe"},[t("div",Pt,[s[19]||(s[19]=t("img",{src:U,alt:"새싹적금",class:"card-img",id:"card-img"},null,-1)),t("div",$t,[t("h4",null,a(e.savingName),1),t("div",Mt,[s[14]||(s[14]=t("i",{class:"bi bi-bar-chart-line me-2",style:{"padding-bottom":"5px"}},null,-1)),S("금리 : "+a(e.rate)+" "+a(e.primeRate?" ~ "+e.primeRate:"")+"%",1),s[15]||(s[15]=t("i",{class:"bi bi-calendar4-week me-2",style:{"padding-left":"10px","padding-bottom":"5px"}},null,-1)),S("예치 기간 : "+a(e.savingPeriod/7)+"주 ",1)])]),t("div",Lt,[t("div",Bt,[s[16]||(s[16]=t("span",{class:"text-muted fw-bold d-block p-0",style:{width:"100px"}},"상품특징",-1)),t("span",jt,a(e.savingContent),1)]),t("div",Vt,[s[17]||(s[17]=t("span",{class:"text-muted fw-bold"},"예치기간",-1)),t("span",Tt,a(e.savingPeriod/7)+"주",1)]),t("div",Rt,[s[18]||(s[18]=t("span",{class:"text-muted fw-bold"},"저축금액",-1)),t("span",Ut,"최대 "+a(e.maxDeposit)+"씨드",1)])]),t("button",{class:"btn2",onClick:c=>q(e),disabled:G(e.savingId)},"상품 가입하기",8,qt)])]))),128))]),M.value?(o(),i("div",Ft,[t("div",Wt,[g.value?b("",!0):(o(),i("h3",Ot,a(h.value)+" 가입하기",1)),g.value?(o(),i("h3",Et,"축하합니다! 예금 가입이 완료되었습니다.")):b("",!0),g.value?(o(),i("div",zt,s[21]||(s[21]=[t("p",null,"이제 나의 적금에서 확인할 수 있습니다.",-1)]))):(o(),i("div",Yt,[s[20]||(s[20]=t("label",null,"금액 설정 : ",-1)),w(t("input",{type:"number","onUpdate:modelValue":s[0]||(s[0]=e=>D.value=e),class:"moneyselect"},null,512),[[V,D.value]]),t("button",{class:"btn btn-primary",onClick:E},"예금 가입하기")])),t("button",{onClick:O},"닫기")])])):b("",!0),$.value?(o(),i("div",Gt,[t("div",Ht,[f.value?b("",!0):(o(),i("h3",Jt,a(_.value)+" 가입하기",1)),f.value?(o(),i("h3",Kt,"축하합니다! 적금 가입이 완료되었습니다.")):b("",!0),f.value?(o(),i("div",Xt,s[23]||(s[23]=[t("p",null,"이제 나의 적금에서 확인할 수 있습니다.",-1)]))):(o(),i("div",Qt,[s[22]||(s[22]=t("label",null,"금액 설정 : ",-1)),w(t("input",{type:"number","onUpdate:modelValue":s[1]||(s[1]=e=>m.value=e),class:"moneyselect"},null,512),[[V,m.value]]),t("button",{class:"btn btn-primary",onClick:Y},"적금 가입하기")])),t("button",{onClick:F},"닫기")])])):b("",!0),t("div",Zt,[t("div",ts,[s[31]||(s[31]=t("h5",{class:"title"},"얼마를 받을 수 있을까? 📱",-1)),t("div",ss,[t("div",es,[s[25]||(s[25]=t("label",null,"상품 선택 : ",-1)),w(t("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>k.value=e),class:"form-control styled-select"},[s[24]||(s[24]=t("option",{value:""},"선택",-1)),(o(!0),i(p,null,y(L.value,(e,l)=>(o(),i("option",{value:e.name},a(e.name),9,ns))),256))],512),[[nt,k.value]])]),t("div",ls,[s[26]||(s[26]=t("label",null,"금리",-1)),t("input",{type:"text",value:K.value,class:"form-control styled-select",disabled:""},null,8,as)]),t("div",os,[s[27]||(s[27]=t("label",null,"입금 금액",-1)),t("div",is,[t("button",{onClick:Z,class:"btn btn-outline-success"},"-"),w(t("input",{type:"number","onUpdate:modelValue":s[3]||(s[3]=e=>r.value=e),class:"form-control"},null,512),[[V,r.value]]),t("button",{onClick:X,class:"btn btn-outline-success"},"+")])]),t("button",{class:"calculate-btn",onClick:Q},"계산하기")]),t("div",ds,[t("div",us,[s[28]||(s[28]=t("label",null,"예상 적립액",-1)),t("div",null,a(r.value)+" 씨드",1)]),t("div",rs,[s[29]||(s[29]=t("label",null,"세후 예상 이자(세금 : 15.4%)",-1)),t("div",null,a(B.value)+" 씨드",1)]),t("div",cs,[s[30]||(s[30]=t("label",null,"만기 금액",-1)),t("div",null,a(R.value)+" 씨드",1)])])])])],64))}},ys=st(vs,[["__scopeId","data-v-bbf563c4"]]);export{ys as default};
