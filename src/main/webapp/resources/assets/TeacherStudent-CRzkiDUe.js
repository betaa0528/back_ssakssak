import{_ as U,c as v,p as A,o as m,e as p,f as t,i as k,w as u,v as b,s as C,F as S,q as g,t as j,B as q,C as D,b as R,E as W,n as Y,P as F,g as T,A as O}from"./index-DvTNLHIP.js";import{a as w}from"./teacherClassApi-AZEW-Jam.js";import{u as X}from"./couter-DDUiOI8Y.js";const y=r=>(q("data-v-d062379f"),r=r(),D(),r),Z={class:"modal-wrap"},tt={class:"modal-container"},et={class:"std-list",style:{"max-height":"100%"}},st={class:"p-4"},ot=y(()=>t("h4",{class:"mb-4"},"학생 정보 수정",-1)),at={class:"mb-3"},lt=y(()=>t("label",{for:"date",class:"form-label"},"고유번호",-1)),dt={class:"mb-3"},nt=y(()=>t("label",{for:"stdNum",class:"form-label"},"학생번호",-1)),it={class:"mb-3"},ct=y(()=>t("label",{for:"title",class:"form-label"},"이름",-1)),rt={class:"mb-3"},ut=y(()=>t("label",{for:"content",class:"form-label"},"생일",-1)),vt={class:"mb-3"},mt=y(()=>t("label",{for:"jobs",class:"form-label"},"직업",-1)),bt=y(()=>t("br",null,null,-1)),_t=["value"],pt={class:"mb-3"},ht=y(()=>t("label",{for:"title",class:"form-label"},"씨드",-1)),ft=y(()=>t("button",{type:"submit",class:"btn btn-primary w-50"},"등록",-1)),yt={__name:"StudentModify",props:{student:{type:Object,required:!0},jobs:{type:Array,required:!0}},emits:["close"],setup(r,{emit:I}){const _=r,s=v({id:_.student.stdId,number:_.student.stdNum,name:_.student.stdName,birthday:_.student.stdBirth,job:_.student.jobId,seed:_.student.seed}),x=I,f=()=>{x("close")},$=async()=>{try{const n=new Date(s.value.birthday).toISOString().split("T")[0],d={stdId:s.value.id,stdNum:s.value.number,stdName:s.value.name,stdBirth:n,jobId:s.value.job,seed:s.value.seed};console.log("전송할 데이터:",d),await w.updateStudent(d),console.log("학생 정보가 성공적으로 업데이트되었습니다."),f()}catch(l){console.error("학생 정보 수정 실패:",l)}};return A(()=>_.student,l=>{s.value={...l}}),(l,n)=>(m(),p("div",Z,[t("div",tt,[t("div",et,[t("div",st,[ot,t("form",{onSubmit:k($,["prevent"]),style:{height:"100%"}},[t("div",at,[lt,u(t("input",{type:"text",id:"date",class:"form-control","onUpdate:modelValue":n[0]||(n[0]=d=>s.value.id=d),readonly:""},null,512),[[b,s.value.id]])]),t("div",dt,[nt,u(t("input",{type:"text",id:"stdNum",class:"form-control","onUpdate:modelValue":n[1]||(n[1]=d=>s.value.number=d),required:""},null,512),[[b,s.value.number]])]),t("div",it,[ct,u(t("input",{type:"text",id:"title",class:"form-control","onUpdate:modelValue":n[2]||(n[2]=d=>s.value.name=d),required:""},null,512),[[b,s.value.name]])]),t("div",rt,[ut,u(t("input",{type:"date",id:"content",class:"form-control","onUpdate:modelValue":n[3]||(n[3]=d=>s.value.birthday=d),required:""},null,512),[[b,s.value.birthday]])]),t("div",vt,[mt,bt,u(t("select",{class:"form-select",name:"jobs",id:"jobs","onUpdate:modelValue":n[4]||(n[4]=d=>s.value.job=d),required:""},[(m(!0),p(S,null,g(r.jobs,d=>(m(),p("option",{key:d.jobId,value:d.jobId},j(d.jobName),9,_t))),128))],512),[[C,s.value.job]])]),t("div",pt,[ht,u(t("input",{type:"text",id:"title",class:"form-control","onUpdate:modelValue":n[5]||(n[5]=d=>s.value.seed=d),required:""},null,512),[[b,s.value.seed]])]),t("div",{class:"d-flex justify-content-end"},[t("button",{type:"button",class:"btn btn-danger w-50 me-2",onClick:f},"취소"),ft])],32)])])])]))}},jt=U(yt,[["__scopeId","data-v-d062379f"]]),N=r=>(q("data-v-dc5c7585"),r=r(),D(),r),xt={class:"modal-wrap"},$t={class:"modal-container"},Nt={class:"std-list",style:{"max-height":"100%"}},wt={class:"p-4"},It=N(()=>t("h4",{class:"mb-4"},"직업 정보 수정",-1)),St={class:"mb-3"},gt=N(()=>t("label",{for:"jobName",class:"form-label"},"직업명",-1)),kt={class:"mb-3"},Ct=N(()=>t("label",{for:"jobDescription",class:"form-label"},"상세설명",-1)),Mt={class:"mb-3"},Vt=N(()=>t("label",{for:"isPrime",class:"form-label"},"추가씨드 여부",-1)),Ut=N(()=>t("option",{value:"Y"},"Yes (Y)",-1)),qt=N(()=>t("option",{value:"N"},"No (N)",-1)),Dt=[Ut,qt],Pt=N(()=>t("button",{type:"submit",class:"btn btn-primary w-50"},"등록",-1)),Bt={__name:"StudentJobModify",props:{job:{type:Object,default:()=>({})}},emits:["close"],setup(r,{emit:I}){const _=r,s=v({jobId:"",jobName:"",jobContent:"",isPrime:""});A(()=>_.job,l=>{l&&l.jobId&&(s.value.jobId=l.jobId,s.value.jobName=l.jobName,s.value.jobContent=l.jobContent,s.value.isPrime=l.isPrime)},{immediate:!0});const x=async()=>{try{const l=await w.updateJob(s.value);console.log("Job updated successfully:",l),$()}catch(l){console.error("Failed to update job:",l)}},f=I,$=()=>{f("close")};return(l,n)=>(m(),p("div",xt,[t("div",$t,[t("div",Nt,[t("div",wt,[It,t("form",{onSubmit:k(x,["prevent"]),style:{height:"100%"}},[t("div",St,[gt,u(t("input",{type:"text",id:"jobName",class:"form-control","onUpdate:modelValue":n[0]||(n[0]=d=>s.value.jobName=d)},null,512),[[b,s.value.jobName]])]),t("div",kt,[Ct,u(t("input",{type:"text",id:"jobDescription",class:"form-control","onUpdate:modelValue":n[1]||(n[1]=d=>s.value.jobContent=d)},null,512),[[b,s.value.jobContent]])]),t("div",Mt,[Vt,u(t("select",{id:"isPrime",class:"form-select","onUpdate:modelValue":n[2]||(n[2]=d=>s.value.isPrime=d)},Dt,512),[[C,s.value.isPrime]])]),t("div",{class:"d-flex justify-content-end"},[t("button",{type:"button",class:"btn btn-danger w-50 me-2",onClick:$},"취소"),Pt])],32)])])])]))}},Jt=U(Bt,[["__scopeId","data-v-dc5c7585"]]),c=r=>(q("data-v-74a43e99"),r=r(),D(),r),Yt={class:"container"},Ft={class:"row mt-5"},Tt={class:"col-8",style:{"overflow-y":"hidden"}},At={class:"card student-card px-3 shadow-sm",style:{height:"100%","border-radius":"12px"}},Ot=c(()=>t("div",{class:"d-flex mt-4 ms-2"},[t("span",{class:"h4"},"학생 목록")],-1)),Et={class:"mt-3",style:{height:"100%"}},Lt=O('<div class="row table-header m-0 mb-2 pe-3" style="border-radius:12px;" data-v-74a43e99><div class="col-1 text-center" data-v-74a43e99><span class="fs-6" data-v-74a43e99>번호</span></div><div class="col-2 text-center" data-v-74a43e99><span class="fs-6" data-v-74a43e99>이름</span></div><div class="col-3 text-center" data-v-74a43e99><span class="fs-6" data-v-74a43e99>직업</span></div><div class="col-3 text-center" data-v-74a43e99><span class="fs-6" data-v-74a43e99>보유 씨드</span></div><div class="col-3 text-center" data-v-74a43e99><span class="fs-6" data-v-74a43e99>수정 / 이별</span></div></div>',1),zt={class:"std-list-wrap"},Gt={class:"col-1"},Ht={class:"fs-6 text-dark"},Kt={class:"col-2"},Qt={class:"fs-6 text-dark"},Rt={class:"col-3"},Wt={class:"fs-6 text-dark"},Xt={class:"col-3"},Zt={class:"fs-6 text-dark"},te={class:"col-3"},ee=["onClick"],se=["onClick"],oe={class:"col-4 shadow-sm"},ae={class:"card new-student-card",style:{height:"100%","border-radius":"12px"}},le={class:"p-4"},de=c(()=>t("h4",{class:"mb-4"},null,-1)),ne={class:"mb-3 mt-2"},ie=c(()=>t("label",{for:"sno",class:"form-label text-dark"},"번호",-1)),ce={class:"mb-3"},re=c(()=>t("label",{for:"name",class:"form-label text-dark"},"이름",-1)),ue={class:"mb-3"},ve=c(()=>t("label",{for:"birthday",class:"form-label text-dark"},"생일",-1)),me={class:"mb-3"},be=c(()=>t("label",{for:"jobs",class:"form-label text-dark"},"직업",-1)),_e=c(()=>t("option",{value:""},"선택하세요",-1)),pe=["value"],he={class:"mb-3"},fe=c(()=>t("label",{for:"seed",class:"form-label text-dark"},"씨드",-1)),ye=c(()=>t("div",{class:"d-flex justify-content-end"},[t("button",{type:"submit",class:"btn btn-primary w-100"},"등록")],-1)),je={class:"row mt-5 align-items-stretch"},xe={class:"col-8",style:{"overflow-y":"hidden"}},$e={class:"card job-list-card px-3 shadow-sm",style:{height:"100%","border-radius":"12px"}},Ne=c(()=>t("div",{class:"d-flex mt-4 ms-2"},[t("span",{class:"h4 text-dark"},"직업 목록")],-1)),we={class:"mt-2 text-center",style:{height:"100%"}},Ie=O('<div class="row table-header m-0 mb-2 pe-4" data-v-74a43e99><div class="col-3 text-center" data-v-74a43e99><span class="fs-6" data-v-74a43e99>직업명</span></div><div class="col-6 text-center" data-v-74a43e99><span class="fs-6" data-v-74a43e99>상세설명</span></div><div class="col-3 text-center" data-v-74a43e99><span class="fs-6" data-v-74a43e99>수정 / 삭제</span></div></div>',1),Se={class:"job-list-wrap pb-4",style:{"overflow-y":"scroll","max-height":"300px"}},ge={class:"col-3"},ke={class:"fs-6 text-dark"},Ce={class:"col-6"},Me={class:"fs-6 text-dark"},Ve={class:"col-3"},Ue=["onClick"],qe=["onClick"],De={class:"col-4 shadow-sm"},Pe={class:"card new-job-card",style:{height:"100%","border-radius":"12px"}},Be={class:"p-4"},Je=c(()=>t("h4",{class:"mb-4 text-dark"},"새 직업 등록",-1)),Ye={class:"mb-3"},Fe=c(()=>t("label",{for:"job-name",class:"form-label text-dark"},"직업명",-1)),Te={class:"mb-3"},Ae=c(()=>t("label",{for:"job-description",class:"form-label text-dark"},"상세설명",-1)),Oe={class:"mb-3"},Ee=c(()=>t("label",{for:"job-isPrime",class:"form-label text-dark"},"추가씨드 여부",-1)),Le=c(()=>t("option",{value:""},"선택하세요",-1)),ze=c(()=>t("option",{value:"Y"},"Yes (Y)",-1)),Ge=c(()=>t("option",{value:"N"},"No (N)",-1)),He=[Le,ze,Ge],Ke=c(()=>t("div",{class:"d-flex justify-content-end"},[t("button",{type:"submit",class:"btn btn-primary w-100"},"등록")],-1)),Qe={__name:"TeacherStudent",setup(r){const I=R();console.log(I.roles);const _=X(),s=v(!1),x=v(!1),f=v([]);v("");const $=v(""),l=v([..._.jobs]),n=v(null),d=async()=>{try{const o=await w.getStudent();console.log("학생 데이터:",o),f.value=o}catch(o){console.error("학생 데이터를 불러오는데 실패했습니다:",o)}},P=async()=>{try{const o=await w.getJobList();console.log("직업 데이터:",o),l.value=o}catch(o){console.error("직업 데이터를 불러오는데 실패했습니다:",o)}},E=o=>{const a=l.value.find(e=>e.jobId===o);return a?a.jobName:"무직"},L=o=>{const a=l.value.findIndex(e=>e.jobId===o);a!==-1?(l.value.splice(a,1),console.log(`직업 ${o}가 삭제되었습니다.`)):console.error(`직업을 ${o}를 찾을 수 없습니다.`)},z=o=>{const a=f.value.findIndex(e=>e.stdId===o);a!==-1?(f.value.splice(a,1),console.log(`학생 ID ${o}가 삭제되었습니다.`)):console.error(`학생 ID ${o}를 찾을 수 없습니다.`)},B=o=>{n.value=o,s.value=!s.value},G=o=>{const a=l.value.find(e=>e.jobId===o);a?($.value=a,x.value=!0):console.error(`직업 ID ${o}를 찾을 수 없습니다.`)},H=()=>{x.value=!1},i=v({stdNum:"",stdName:"",stdBirth:"",jobId:"",seed:""}),J=v(!0),K=async()=>{if(!i.value.stdNum||!i.value.stdName||!i.value.stdBirth||!i.value.jobId||!i.value.seed){J.value=!1;return}try{const o=await w.registStudent(i.value);console.log("학생 등록 성공:",o),i.value.stdNum="",i.value.stdName="",i.value.stdBirth="",i.value.jobId="",i.value.seed=""}catch(o){console.error("학생 등록 실패:",o)}},M=v(!0),h=v({jobName:"",jobContent:"",isPrime:""}),Q=async()=>{try{const o=await w.registJob(h.value);console.log("직업 추가 성공:",o.data),await P(),h.value.jobName="",h.value.jobContent="",h.value.isPrime="",M.value=!0}catch(o){console.error("직업 추가 실패:",o),M.value=!1}};return W(()=>{d(),P()}),(o,a)=>(m(),p(S,null,[t("div",Yt,[t("div",Ft,[t("div",Tt,[t("div",At,[Ot,t("div",Et,[Lt,t("div",zt,[(m(!0),p(S,null,g(f.value,e=>(m(),p("div",{key:e.id,class:"row text-center table-row py-2 m-0",style:{"border-radius":"12px"}},[t("div",Gt,[t("span",Ht,j(e.stdNum),1)]),t("div",Kt,[t("span",Qt,j(e.stdName),1)]),t("div",Rt,[t("span",Wt,j(E(e.jobId)),1)]),t("div",Xt,[t("span",Zt,j(e.seed),1)]),t("div",te,[t("button",{class:"btn btn-sm btn-outline-primary me-2",onClick:V=>B(e)},"수정",8,ee),t("button",{class:"btn btn-sm btn-outline-danger",onClick:V=>z(e.stdId)},"이별",8,se)])]))),128))])])])]),t("div",oe,[t("div",ae,[t("div",le,[de,t("form",{onSubmit:k(K,["prevent"]),class:Y(J.value?"needs-validation":"needs-validation was-validated"),novalidate:""},[t("div",ne,[ie,u(t("input",{type:"text",id:"sno",class:"form-control","onUpdate:modelValue":a[0]||(a[0]=e=>i.value.stdNum=e),required:""},null,512),[[b,i.value.stdNum]])]),t("div",ce,[re,u(t("input",{type:"text",id:"name",class:"form-control","onUpdate:modelValue":a[1]||(a[1]=e=>i.value.stdName=e),required:""},null,512),[[b,i.value.stdName]])]),t("div",ue,[ve,u(t("input",{type:"date",id:"birthday",class:"form-control","onUpdate:modelValue":a[2]||(a[2]=e=>i.value.stdBirth=e),required:""},null,512),[[b,i.value.stdBirth]])]),t("div",me,[be,u(t("select",{class:"form-select",id:"jobs","onUpdate:modelValue":a[3]||(a[3]=e=>i.value.jobId=e),required:""},[_e,(m(!0),p(S,null,g(l.value,e=>(m(),p("option",{key:e.jobId,value:e.jobId},j(e.jobName),9,pe))),128))],512),[[C,i.value.jobId]])]),t("div",he,[fe,u(t("input",{type:"text",id:"seed",class:"form-control","onUpdate:modelValue":a[4]||(a[4]=e=>i.value.seed=e),required:""},null,512),[[b,i.value.seed]])]),ye],34)])])])]),t("div",je,[t("div",xe,[t("div",$e,[Ne,t("div",we,[Ie,t("div",Se,[(m(!0),p(S,null,g(l.value,e=>(m(),p("div",{key:e.jobId,class:"row text-center py-2 m-0",style:{"border-radius":"12px"}},[t("div",ge,[t("span",ke,j(e.jobName),1)]),t("div",Ce,[t("span",Me,j(e.jobContent),1)]),t("div",Ve,[t("button",{class:"btn btn-sm btn-outline-primary me-2",onClick:V=>G(e.jobId)},"수정",8,Ue),t("button",{class:"btn btn-sm btn-outline-danger",type:"button",onClick:V=>L(e.jobId)},"삭제",8,qe)])]))),128))])])])]),t("div",De,[t("div",Pe,[t("div",Be,[Je,t("form",{onSubmit:k(Q,["prevent"]),class:Y(M.value?"needs-validation":"needs-validation was-validated"),style:{height:"100%"},novalidate:""},[t("div",Ye,[Fe,u(t("input",{type:"text",id:"job-name",class:"form-control","onUpdate:modelValue":a[5]||(a[5]=e=>h.value.jobName=e),required:""},null,512),[[b,h.value.jobName]])]),t("div",Te,[Ae,u(t("input",{type:"text",id:"job-description",class:"form-control","onUpdate:modelValue":a[6]||(a[6]=e=>h.value.jobContent=e),required:""},null,512),[[b,h.value.jobContent]])]),t("div",Oe,[Ee,u(t("select",{id:"job-isPrime",class:"form-select","onUpdate:modelValue":a[7]||(a[7]=e=>h.value.isPrime=e),required:""},He,512),[[C,h.value.isPrime]])]),Ke],34)])])])])]),s.value?(m(),F(jt,{key:0,onClose:B,student:n.value,jobs:l.value},null,8,["student","jobs"])):T("",!0),x.value?(m(),F(Jt,{key:1,onClose:H,job:$.value},null,8,["job"])):T("",!0)],64))}},Ze=U(Qe,[["__scopeId","data-v-74a43e99"]]);export{Ze as default};
