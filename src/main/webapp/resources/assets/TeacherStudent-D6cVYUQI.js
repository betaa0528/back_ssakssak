import{_ as C,c as u,p as J,o as v,e as b,f as t,i as k,w as r,v as c,s as I,F as h,q as g,t as y,b as E,C as G,x as q,n as D,N as P,h as B}from"./index-gxZJ1D_R.js";import{a as _}from"./teacherClassApi-G0G2uyYe.js";import{u as H}from"./couter-DgqE6AFt.js";const K={class:"modal-wrap"},Q={class:"modal-container"},R={class:"std-list",style:{"max-height":"100%"}},W={class:"p-4"},X={class:"mb-3"},Z={class:"mb-3"},tt={class:"mb-3"},st={class:"mb-3"},et={class:"mb-3"},ot=["value"],lt={class:"mb-3"},at={__name:"StudentModify",props:{student:{type:Object,required:!0},jobs:{type:Array,required:!0}},emits:["close"],setup(N,{emit:w}){const m=N,l=u({id:m.student.stdId,number:m.student.stdNum,name:m.student.stdName,birthday:m.student.stdBirth,job:m.student.jobId,seed:m.student.seed}),j=w,f=()=>{j("close")},x=async()=>{try{const e=new Date(l.value.birthday).toISOString().split("T")[0],n={stdId:l.value.id,stdNum:l.value.number,stdName:l.value.name,stdBirth:e,jobId:l.value.job,seed:l.value.seed};console.log("전송할 데이터:",n),await _.updateStudent(n),console.log("학생 정보가 성공적으로 업데이트되었습니다."),f()}catch(d){console.error("학생 정보 수정 실패:",d)}};return J(()=>m.student,d=>{l.value={...d}}),(d,e)=>(v(),b("div",K,[t("div",Q,[t("div",R,[t("div",W,[e[14]||(e[14]=t("h4",{class:"mb-4"},"학생 정보 수정",-1)),t("form",{onSubmit:k(x,["prevent"]),style:{height:"100%"}},[t("div",X,[e[6]||(e[6]=t("label",{for:"date",class:"form-label"},"고유번호",-1)),r(t("input",{type:"text",id:"date",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=n=>l.value.id=n),readonly:""},null,512),[[c,l.value.id]])]),t("div",Z,[e[7]||(e[7]=t("label",{for:"stdNum",class:"form-label"},"학생번호",-1)),r(t("input",{type:"text",id:"stdNum",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=n=>l.value.number=n),required:""},null,512),[[c,l.value.number]])]),t("div",tt,[e[8]||(e[8]=t("label",{for:"title",class:"form-label"},"이름",-1)),r(t("input",{type:"text",id:"title",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=n=>l.value.name=n),required:""},null,512),[[c,l.value.name]])]),t("div",st,[e[9]||(e[9]=t("label",{for:"content",class:"form-label"},"생일",-1)),r(t("input",{type:"date",id:"content",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=n=>l.value.birthday=n),required:""},null,512),[[c,l.value.birthday]])]),t("div",et,[e[10]||(e[10]=t("label",{for:"jobs",class:"form-label"},"직업",-1)),e[11]||(e[11]=t("br",null,null,-1)),r(t("select",{class:"form-select",name:"jobs",id:"jobs","onUpdate:modelValue":e[4]||(e[4]=n=>l.value.job=n),required:""},[(v(!0),b(h,null,g(N.jobs,n=>(v(),b("option",{key:n.jobId,value:n.jobId},y(n.jobName),9,ot))),128))],512),[[I,l.value.job]])]),t("div",lt,[e[12]||(e[12]=t("label",{for:"title",class:"form-label"},"씨드",-1)),r(t("input",{type:"text",id:"title",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=n=>l.value.seed=n),required:""},null,512),[[c,l.value.seed]])]),t("div",{class:"d-flex justify-content-end"},[t("button",{type:"button",class:"btn btn-danger w-50 me-2",onClick:f},"취소"),e[13]||(e[13]=t("button",{type:"submit",class:"btn btn-primary w-50"},"등록",-1))])],32)])])])]))}},dt=C(at,[["__scopeId","data-v-d062379f"]]),nt={class:"modal-wrap"},it={class:"modal-container"},rt={class:"std-list",style:{"max-height":"100%"}},ut={class:"p-4"},vt={class:"mb-3"},ct={class:"mb-3"},mt={class:"mb-3"},bt={__name:"StudentJobModify",props:{job:{type:Object,default:()=>({})}},emits:["close"],setup(N,{emit:w}){const m=N,l=u({jobId:"",jobName:"",jobContent:"",isPrime:""});J(()=>m.job,d=>{d&&d.jobId&&(l.value.jobId=d.jobId,l.value.jobName=d.jobName,l.value.jobContent=d.jobContent,l.value.isPrime=d.isPrime)},{immediate:!0});const j=async()=>{try{const d=await _.updateJob(l.value);console.log("Job updated successfully:",d),x()}catch(d){console.error("Failed to update job:",d)}},f=w,x=()=>{f("close")};return(d,e)=>(v(),b("div",nt,[t("div",it,[t("div",rt,[t("div",ut,[e[8]||(e[8]=t("h4",{class:"mb-4"},"직업 정보 수정",-1)),t("form",{onSubmit:k(j,["prevent"]),style:{height:"100%"}},[t("div",vt,[e[3]||(e[3]=t("label",{for:"jobName",class:"form-label"},"직업명",-1)),r(t("input",{type:"text",id:"jobName",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=n=>l.value.jobName=n)},null,512),[[c,l.value.jobName]])]),t("div",ct,[e[4]||(e[4]=t("label",{for:"jobDescription",class:"form-label"},"상세설명",-1)),r(t("input",{type:"text",id:"jobDescription",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=n=>l.value.jobContent=n)},null,512),[[c,l.value.jobContent]])]),t("div",mt,[e[6]||(e[6]=t("label",{for:"isPrime",class:"form-label"},"추가씨드 여부",-1)),r(t("select",{id:"isPrime",class:"form-select","onUpdate:modelValue":e[2]||(e[2]=n=>l.value.isPrime=n)},e[5]||(e[5]=[t("option",{value:"Y"},"Yes (Y)",-1),t("option",{value:"N"},"No (N)",-1)]),512),[[I,l.value.isPrime]])]),t("div",{class:"d-flex justify-content-end"},[t("button",{type:"button",class:"btn btn-danger w-50 me-2",onClick:x},"취소"),e[7]||(e[7]=t("button",{type:"submit",class:"btn btn-primary w-50"},"등록",-1))])],32)])])])]))}},pt=C(bt,[["__scopeId","data-v-dc5c7585"]]),ft={class:"container"},yt={class:"row mt-5"},jt={class:"col-8",style:{"overflow-y":"hidden"}},xt={class:"card student-card px-3 shadow-sm",style:{height:"100%","border-radius":"12px"}},_t={class:"mt-3",style:{height:"100%"}},Nt={class:"std-list-wrap"},wt={class:"col-1"},ht={class:"fs-6 text-dark"},gt={class:"col-2"},kt={class:"fs-6 text-dark"},It={class:"col-3"},St={class:"fs-6 text-dark"},$t={class:"col-3"},Ct={class:"fs-6 text-dark"},Mt={class:"col-3"},Vt=["onClick"],Ut=["onClick"],qt={class:"col-4 shadow-sm"},Dt={class:"card new-student-card",style:{height:"100%","border-radius":"12px"}},Pt={class:"p-4"},Bt={class:"mb-3 mt-2"},Jt={class:"mb-3"},Yt={class:"mb-3"},Ft={class:"mb-3"},Tt=["value"],Ot={class:"mb-3"},At={class:"row mt-5 align-items-stretch"},Lt={class:"col-8",style:{"overflow-y":"hidden"}},zt={class:"card job-list-card px-3 shadow-sm",style:{height:"100%","border-radius":"12px"}},Et={class:"mt-2 text-center",style:{height:"100%"}},Gt={class:"job-list-wrap pb-4",style:{"overflow-y":"scroll","max-height":"300px"}},Ht={class:"col-3"},Kt={class:"fs-6 text-dark"},Qt={class:"col-6"},Rt={class:"fs-6 text-dark"},Wt={class:"col-3"},Xt=["onClick"],Zt=["onClick"],ts={class:"col-4 shadow-sm"},ss={class:"card new-job-card",style:{height:"100%","border-radius":"12px"}},es={class:"p-4"},os={class:"mb-3"},ls={class:"mb-3"},as={class:"mb-3"},ds={__name:"TeacherStudent",setup(N){const w=E();console.log(w.roles);const m=H(),l=u(!1),j=u(!1),f=u([]);u("");const x=u(""),d=u([...m.jobs]),e=u(null),n=async()=>{try{const a=await _.getStudent();console.log("학생 데이터:",a),f.value=a}catch(a){console.error("학생 데이터를 불러오는데 실패했습니다:",a)}},M=async()=>{try{const a=await _.getJobList();console.log("직업 데이터:",a),d.value=a}catch(a){console.error("직업 데이터를 불러오는데 실패했습니다:",a)}},Y=a=>{const s=d.value.find(o=>o.jobId===a);return s?s.jobName:"무직"},F=a=>{const s=d.value.findIndex(o=>o.jobId===a);s!==-1?(d.value.splice(s,1),console.log(`직업 ${a}가 삭제되었습니다.`)):console.error(`직업을 ${a}를 찾을 수 없습니다.`)},T=a=>{const s=f.value.findIndex(o=>o.stdId===a);s!==-1?(f.value.splice(s,1),console.log(`학생 ID ${a}가 삭제되었습니다.`)):console.error(`학생 ID ${a}를 찾을 수 없습니다.`)},V=a=>{e.value=a,l.value=!l.value},O=a=>{const s=d.value.find(o=>o.jobId===a);s?(x.value=s,j.value=!0):console.error(`직업 ID ${a}를 찾을 수 없습니다.`)},A=()=>{j.value=!1},i=u({stdNum:"",stdName:"",stdBirth:"",jobId:"",seed:""}),U=u(!0),L=async()=>{if(!i.value.stdNum||!i.value.stdName||!i.value.stdBirth||!i.value.jobId||!i.value.seed){U.value=!1;return}try{const a=await _.registStudent(i.value);console.log("학생 등록 성공:",a),i.value.stdNum="",i.value.stdName="",i.value.stdBirth="",i.value.jobId="",i.value.seed=""}catch(a){console.error("학생 등록 실패:",a)}},S=u(!0),p=u({jobName:"",jobContent:"",isPrime:""}),z=async()=>{try{const a=await _.registJob(p.value);console.log("직업 추가 성공:",a.data),await M(),p.value.jobName="",p.value.jobContent="",p.value.isPrime="",S.value=!0}catch(a){console.error("직업 추가 실패:",a),S.value=!1}};return G(()=>{n(),M()}),(a,s)=>(v(),b(h,null,[t("div",ft,[t("div",yt,[t("div",jt,[t("div",xt,[s[9]||(s[9]=t("div",{class:"d-flex mt-4 ms-2"},[t("span",{class:"h4"},"학생 목록")],-1)),t("div",_t,[s[8]||(s[8]=q('<div class="row table-header m-0 mb-2 pe-3" style="border-radius:12px;" data-v-74a43e99><div class="col-1 text-center" data-v-74a43e99><span class="fs-6" data-v-74a43e99>번호</span></div><div class="col-2 text-center" data-v-74a43e99><span class="fs-6" data-v-74a43e99>이름</span></div><div class="col-3 text-center" data-v-74a43e99><span class="fs-6" data-v-74a43e99>직업</span></div><div class="col-3 text-center" data-v-74a43e99><span class="fs-6" data-v-74a43e99>보유 씨드</span></div><div class="col-3 text-center" data-v-74a43e99><span class="fs-6" data-v-74a43e99>수정 / 이별</span></div></div>',1)),t("div",Nt,[(v(!0),b(h,null,g(f.value,o=>(v(),b("div",{key:o.id,class:"row text-center table-row py-2 m-0",style:{"border-radius":"12px"}},[t("div",wt,[t("span",ht,y(o.stdNum),1)]),t("div",gt,[t("span",kt,y(o.stdName),1)]),t("div",It,[t("span",St,y(Y(o.jobId)),1)]),t("div",$t,[t("span",Ct,y(o.seed),1)]),t("div",Mt,[t("button",{class:"btn btn-sm btn-outline-primary me-2",onClick:$=>V(o)},"수정",8,Vt),t("button",{class:"btn btn-sm btn-outline-danger",onClick:$=>T(o.stdId)},"이별",8,Ut)])]))),128))])])])]),t("div",qt,[t("div",Dt,[t("div",Pt,[s[17]||(s[17]=t("h4",{class:"mb-4"},null,-1)),t("form",{onSubmit:k(L,["prevent"]),class:D(U.value?"needs-validation":"needs-validation was-validated"),novalidate:""},[t("div",Bt,[s[10]||(s[10]=t("label",{for:"sno",class:"form-label text-dark"},"번호",-1)),r(t("input",{type:"text",id:"sno",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=o=>i.value.stdNum=o),required:""},null,512),[[c,i.value.stdNum]])]),t("div",Jt,[s[11]||(s[11]=t("label",{for:"name",class:"form-label text-dark"},"이름",-1)),r(t("input",{type:"text",id:"name",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=o=>i.value.stdName=o),required:""},null,512),[[c,i.value.stdName]])]),t("div",Yt,[s[12]||(s[12]=t("label",{for:"birthday",class:"form-label text-dark"},"생일",-1)),r(t("input",{type:"date",id:"birthday",class:"form-control","onUpdate:modelValue":s[2]||(s[2]=o=>i.value.stdBirth=o),required:""},null,512),[[c,i.value.stdBirth]])]),t("div",Ft,[s[14]||(s[14]=t("label",{for:"jobs",class:"form-label text-dark"},"직업",-1)),r(t("select",{class:"form-select",id:"jobs","onUpdate:modelValue":s[3]||(s[3]=o=>i.value.jobId=o),required:""},[s[13]||(s[13]=t("option",{value:""},"선택하세요",-1)),(v(!0),b(h,null,g(d.value,o=>(v(),b("option",{key:o.jobId,value:o.jobId},y(o.jobName),9,Tt))),128))],512),[[I,i.value.jobId]])]),t("div",Ot,[s[15]||(s[15]=t("label",{for:"seed",class:"form-label text-dark"},"씨드",-1)),r(t("input",{type:"text",id:"seed",class:"form-control","onUpdate:modelValue":s[4]||(s[4]=o=>i.value.seed=o),required:""},null,512),[[c,i.value.seed]])]),s[16]||(s[16]=t("div",{class:"d-flex justify-content-end"},[t("button",{type:"submit",class:"btn btn-primary w-100"},"등록")],-1))],34)])])])]),t("div",At,[t("div",Lt,[t("div",zt,[s[19]||(s[19]=t("div",{class:"d-flex mt-4 ms-2"},[t("span",{class:"h4 text-dark"},"직업 목록")],-1)),t("div",Et,[s[18]||(s[18]=q('<div class="row table-header m-0 mb-2 pe-4" data-v-74a43e99><div class="col-3 text-center" data-v-74a43e99><span class="fs-6" data-v-74a43e99>직업명</span></div><div class="col-6 text-center" data-v-74a43e99><span class="fs-6" data-v-74a43e99>상세설명</span></div><div class="col-3 text-center" data-v-74a43e99><span class="fs-6" data-v-74a43e99>수정 / 삭제</span></div></div>',1)),t("div",Gt,[(v(!0),b(h,null,g(d.value,o=>(v(),b("div",{key:o.jobId,class:"row text-center py-2 m-0",style:{"border-radius":"12px"}},[t("div",Ht,[t("span",Kt,y(o.jobName),1)]),t("div",Qt,[t("span",Rt,y(o.jobContent),1)]),t("div",Wt,[t("button",{class:"btn btn-sm btn-outline-primary me-2",onClick:$=>O(o.jobId)},"수정",8,Xt),t("button",{class:"btn btn-sm btn-outline-danger",type:"button",onClick:$=>F(o.jobId)},"삭제",8,Zt)])]))),128))])])])]),t("div",ts,[t("div",ss,[t("div",es,[s[25]||(s[25]=t("h4",{class:"mb-4 text-dark"},"새 직업 등록",-1)),t("form",{onSubmit:k(z,["prevent"]),class:D(S.value?"needs-validation":"needs-validation was-validated"),style:{height:"100%"},novalidate:""},[t("div",os,[s[20]||(s[20]=t("label",{for:"job-name",class:"form-label text-dark"},"직업명",-1)),r(t("input",{type:"text",id:"job-name",class:"form-control","onUpdate:modelValue":s[5]||(s[5]=o=>p.value.jobName=o),required:""},null,512),[[c,p.value.jobName]])]),t("div",ls,[s[21]||(s[21]=t("label",{for:"job-description",class:"form-label text-dark"},"상세설명",-1)),r(t("input",{type:"text",id:"job-description",class:"form-control","onUpdate:modelValue":s[6]||(s[6]=o=>p.value.jobContent=o),required:""},null,512),[[c,p.value.jobContent]])]),t("div",as,[s[23]||(s[23]=t("label",{for:"job-isPrime",class:"form-label text-dark"},"추가씨드 여부",-1)),r(t("select",{id:"job-isPrime",class:"form-select","onUpdate:modelValue":s[7]||(s[7]=o=>p.value.isPrime=o),required:""},s[22]||(s[22]=[t("option",{value:""},"선택하세요",-1),t("option",{value:"Y"},"Yes (Y)",-1),t("option",{value:"N"},"No (N)",-1)]),512),[[I,p.value.isPrime]])]),s[24]||(s[24]=t("div",{class:"d-flex justify-content-end"},[t("button",{type:"submit",class:"btn btn-primary w-100"},"등록")],-1))],34)])])])])]),l.value?(v(),P(dt,{key:0,onClose:V,student:e.value,jobs:d.value},null,8,["student","jobs"])):B("",!0),j.value?(v(),P(pt,{key:1,onClose:A,job:x.value},null,8,["job"])):B("",!0)],64))}},us=C(ds,[["__scopeId","data-v-74a43e99"]]);export{us as default};
